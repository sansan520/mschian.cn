{% extends "base.html" %}
{% block title %}Index{% endblock %}
{% block head %}
    {{ super() }}
    <script src="static/js/common.js"></script>
{% endblock %}

{% block  content %}
    <!-- 主体开始 -->
	<div class="logreg-mian container">
			<div class="row">
				<div class="col-xs-12 col-sm-6 col-sm-offset-3 col-md-4 col-md-offset-4">
					<div class="register-box">
						<div class="form-horizontal">
							<div class="page-header clearfix">
								<h4 class="pull-left">房东注册</h4>
								<div class="pull-right reg-login">
									<span>已是会员</span>
									<a href="" class="login-yhzc">登录</a>
								</div>
							</div>
							<div class="form-group">
							  <label for="" class="col-sm-3 col-lg-2 control-label">账号</label>
							  <div class="col-sm-9 col-lg-10">
							  	<input type="text" id="user_account" class="text-left reg-ipt" placeholder="账号" required="">
							  </div>
							</div>
							<div class="form-group">
								  <label for="" class="col-sm-3 col-lg-2 control-label">密码</label>
								  <div class="col-sm-9 col-lg-10">
								  	<input type="text" id="password" class="text-left reg-ipt" placeholder="密码">
								  </div>
							</div>
							<div class="form-group">
								  <label for="" class="col-sm-3 col-lg-2 control-label">手机号</label>
								  <div class="col-sm-9 col-lg-10">
								  	<input type="text" id="mobile" class="text-left reg-ipt" placeholder="手机号">
								  </div>
							</div>
                            <div class="form-group">
							  <label for="" class="col-sm-3 col-lg-2 control-label">头像</label>
							  <div class="col-sm-9 col-lg-10 msMagND-txt">
								<div class="form-group">
									<div class="upFile up-idCard-box">
										<input type="file" id="fileupload" name="file[]">
										<p class="btn sfz-btn">点击上传头像</p>
									</div>
								</div>
							  </div>
							</div>

							<!--<div class="form-group">
								  <label for="" class="col-xs-12 col-sm-3 col-lg-2 control-label">验证码</label>
								  <div class="col-xs-8 col-sm-6 col-lg-7">
								  	<input type="text" class="text-left reg-ipt" placeholder="验证码">
								  </div>
								   <div class="col-xs-4 col-sm-3 col-lg-3">
								  	<img class="reg-yzm" style="height: 36px; width: 100%;" src= "http://taiwan.zizaike.com/zzk_public/captcha.php" />
								  </div>
							</div>-->

						  	<div class="form-group">
						  		<div class="col-xs-12 col-sm-4 col-sm-offset-3  col-lg-offset-2">
						  			<button class="btn btn-login btn-reg" type="submit">下一步</button>
						  		</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	<!-- 主体结束 -->

{% endblock %}
{% block script %}
    <script>
    $(".btn-reg").submit(function () {
        var user_account = $("#user_account").val();
        var user_password = $("#passord").val();
        var user_mobile = $("#mobile").val();
        var user_headimg = $("#cropOutput").val();
        if (!user_account) {
            alter("账号不能为空");
        }
        if (user_account.length < 6 || user_account.length > 16) {
            alter("账号长度大于6小于16");
        }
        if (!user_password) {
            alter("密码不能为空");
        }
        if (user_password.length < 6 || user_password.length > 16) {
            alter("密码长度大于6小于16");
        }
        if (!user_mobile) {
            alter("手机号不能为空");
        }
        if (user_mobile.length < 11) {
            alter("手机号不能小于11");
        }
        if (!/^(13|15|18|17[0-9]{9})$/.test(user_mobile)) {
            alter("手机号格式不正确");
        }
        $.ajax({url: "/do_user_register",
                data: JSON.stringify({"user_account": user_account,
                "password": user_password,
                "mobile": user_mobile,
                "cropOutput":user_headimg
                }),
                contentType: "application/json",
                success:function (data) {
                    if(data.code == 0){
                        alert("注册失败");
                    }else if(data.code == 1){
                        location.href = "/register03";
                    }
                }
            });

    });

    </script>
{% endblock %}
